<!doctype html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Clayton Richey&#39;s blog</title>
        <meta name="author">
        <meta name="description" content="The blog of Clayton Richey.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="generator" content="Hugo 0.41" />
        <link href="https://claytonrichey.com/post/index.xml" rel="alternate" type="application/rss+xml" title="Clayton Richey&#39;s blog" />
        <link href="https://claytonrichey.com/post/index.xml" rel="feed" type="application/rss+xml" title="Clayton Richey&#39;s blog" />
        <link href='//fonts.googleapis.com/css?family=Roboto:400,300,700|Noto+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://claytonrichey.com/css/styles.css">
        <link rel="icon" href="https://claytonrichey.com/favicon.ico">
        <link rel="apple-touch-icon" href="https://claytonrichey.com/apple-touch-icon.png" />
        <link rel="stylesheet" href="https://claytonrichey.com/css/highlightjs/monokai.css">
        <script src="https://claytonrichey.com/js/vendor/modernizr-2.8.0.min.js"></script>
        
        <style>
        .site-header h2 .logo {
        background: url(https://claytonrichey.com/img/desk.jpg) no-repeat 0 0;
        }
        @media (min--moz-device-pixel-ratio: 1.3), (-o-min-device-pixel-ratio: 2.6 / 2), (-webkit-min-device-pixel-ratio: 1.3), (min-device-pixel-ratio: 1.3), (min-resolution: 1.3dppx) {
          .site-header h2 .logo {
            background-image: url(https://claytonrichey.com/img/desk.jpg);
        }}
       .site-header {
         background: #2a373d url(https://claytonrichey.com/img/desk.jpg) no-repeat center center;
         z-index: -1;
        }
        </style>
    </head>
    <body>
        
        <header class="site-header">
          <div class="transparent-layer">
              <h2></h2>
          </div>
        </header>


<div class="container clearfix">
    <main role="main" class="content">
        <article class="post">
            <a class="btn home" href="https://claytonrichey.com" title="Back to home">&laquo; Back to home</a>
            
<h1><a href="https://claytonrichey.com/post/pyside-pyqt-app/" title="Cross Platform Desktop Apps with PySide/PyQt">Cross Platform Desktop Apps with PySide/PyQt</a></h1>

<footer class="post-info">Posted on <span class="post-meta"><time datetime="2018.06.03">2018.06.03</time>

</span>
</footer>

            

<h2 id="introduction">Introduction</h2>

<p>While web applications are increasingly the go-to approach for modern applications, native desktop applications undoubtedly still have their place.</p>

<p>Qt is a very robust, well documented, cross-platform GUI framework. Qt is a C++ framework, but conveniently there are bindings for many other languages including Python. Additionally, we can use Qt Designer for WYSIWYG design of our GUI layout.</p>

<p>We can also use other tools such as cx_Freeze to create an executable application and InnoSetup to create a Windows installer.</p>

<p>Full source for example PySide and PyQt5 applications are found here:</p>

<p><a href="https://bitbucket.org/Odoth/pyside-template/">https://bitbucket.org/Odoth/pyside-template/</a></p>

<p><a href="https://bitbucket.org/Odoth/pyqt5-template/">https://bitbucket.org/Odoth/pyqt5-template/</a></p>

<h2 id="qt-vs-other-gui-toolkits">Qt vs Other GUI Toolkits</h2>

<p>Some alternatives to Qt for building cross-platform desktop GUI aps with Python are:</p>

<ul>
<li>Tkinter (Python standard library)</li>
<li>wxPython</li>
<li>Kivy</li>
</ul>

<p>Generally, these are all good toolkits and can be used to build great apps.</p>

<h2 id="pyside-vs-pyqt4-vs-pyside2-vs-pyqt5-vs-qt-for-python">PySide vs PyQt4 vs PySide2 vs PyQt5 vs &ldquo;Qt for Python&rdquo;</h2>

<p>PySide and PyQt4 are two different Python binding libraries for Qt4. Similarly, PySide2 and PyQt5 are both bindings for Qt5. &ldquo;Qt for Python&rdquo; is the name of the project that produces the PySide2 library.</p>

<p>So which should you choose?</p>

<p>For Qt4 (PySide vs PyQt4), the API for both bindings are nearly interchangeable, so the bigger consideration would be the license difference. PyQt4 can be used under either GPL or commercial license, while PySide can be used under the more permissive LGPL license. PyPi has win32 PySide wheels supporting Python v2.6 - v3.4, making it easy to install on Windows, but building is required on other platforms. PyQt4 latest release is available as source only.</p>

<p>As of this writing, PySide2 is still under development so the only viable option for Qt5 is PyQt5. PyQt5 also uses the dual GPL/commercial license like PyQt4.</p>

<p>Python version also matters. PyPi has PyQt5 wheels only for Python v3.5+. Supposedly you can build PyQt5 for lower version if needed (I haven&rsquo;t tried it).</p>

<p><strong>TL;DR: For Python v2.6 - v3.4 use PySide. For Python v3.5+ use PyQt5.</strong></p>

<p>Below examples are for Python 3.6 with PyQt5.</p>

<h2 id="installation">Installation</h2>

<pre><code>pip install pyqt5
Collecting pyqt5
  Downloading https://files.pythonhosted.org/packages/e4/15/4e2e49f64884edbab6f833c6fd3add24d7938f2429aec1f2883e645d4d8f/PyQt5-5.10.1-5.10.1-cp35.cp36.cp37.cp38-abi3-manylinux1_x86_64.whl (107.8MB)
    100% |████████████████████████████████| 107.8MB 363kB/s 
Collecting sip&lt;4.20,&gt;=4.19.4 (from pyqt5)
  Downloading https://files.pythonhosted.org/packages/8a/ea/d317ce5696dda4df7c156cd60447cda22833b38106c98250eae1451f03ec/sip-4.19.8-cp36-cp36m-manylinux1_x86_64.whl (66kB)
    100% |████████████████████████████████| 71kB 13.4MB/s 
Installing collected packages: sip, pyqt5
Successfully installed pyqt5-5.10.1 sip-4.19.8

</code></pre>

<h2 id="project-structure">Project Structure</h2>

<p>The basic folder structure looks like this:</p>

<pre><code>project
|
|--/designer
|
|--/icons
|
|--/src
   |
   |--/ui
   |
   |--/widgets
   |
   |--app_info.py
   |
   |--application.py
</code></pre>

<p><strong><code>designer</code></strong> - This is where all the <code>.ui</code> files created with Designer will be saved.</p>

<p><strong><code>src/ui</code></strong> - The <code>.ui</code> files from <code>designer</code> will be processed and <code>.py</code> files will be generated in this folder.</p>

<p><strong><code>src/widgets</code></strong> - Here we&rsquo;ll write the actual logic for each of the widgets we created with Designer.</p>

<p><strong><code>src/app_info.py</code></strong> - Simple file containing version and other details.</p>

<p><strong><code>src/application.py</code></strong> - The application entry point.</p>

<h2 id="wysiwyg-with-designer">WYSIWYG with Designer</h2>

<p>You&rsquo;ll need to make sure Qt5 Designer is installed on your system. Installation steps will vary depending on your platform.</p>

<p>I&rsquo;ll leave general Designer tutorial to others, but one thing I will cover is how to include other custom widgets when using the Designer.</p>

<p>In our PyQt5 example application we have created <code>SomeWidget.ui</code> and <code>AnotherWidget.ui</code> with Designer and saved them in the <code>designer</code> directory. Now we want to add these widgets to our <code>MainWindow.ui</code>. We simply add a place holder <code>Widget</code> to our MainWindow then Right Click that Widget and select <code>Promote to...</code>.</p>

<p>In the <strong>Promoted class name</strong> field we put the class name that we will use in our Python code, e.g. <code>SomeWidget</code>. In the <strong>Header file</strong> field we put the path to our Python file containing this class, except using <strong>.h</strong> extension instead of <strong>.py</strong>, e.g. <code>widgets/some_widget.h</code>.</p>

<h2 id="compiling-ui-files">Compiling UI Files</h2>

<p>The tool used to compile .ui files to Python files is <code>uic</code>. It&rsquo;s usable as a command line tool or can be imported and used as a Python library. We use this snippet in our <code>build.py</code> script to compile all our .ui files and store the output files in the <code>src/ui</code> directory.</p>

<pre><code class="language-python">def build_ui():
    import os
    from PyQt5.uic import compileUiDir

    design_dir = os.path.join(os.path.dirname(__file__), 'designer')

    def uicmap(py_dir, py_file):
        rtn_dir = os.path.join(&quot;src&quot;, &quot;ui&quot;)
        rtn_file = py_file.replace(&quot;.py&quot;, &quot;_ui.py&quot;)

        return rtn_dir, rtn_file

    compileUiDir(design_dir, map=uicmap)
</code></pre>

<h2 id="implementing-widgets">Implementing Widgets</h2>

<p>Compiling our <code>.ui</code> files just generated a bunch of ui setup code for us. We have to define the actual Widget classes in our Python code and call into the generated code using the <code>setupUi</code> method.</p>

<p>Any additional logic then can be added to our class, such as adding signal handlers.</p>

<pre><code class="language-python"># src/widgets/main_window.py

from PyQt5 import QtWidgets, QtGui
from ui.MainWindow_ui import Ui_MainWindow
from app_info import APP_INFO


class MainWindow(QtWidgets.QMainWindow, Ui_MainWindow):
    def __init__(self, *args, **kwargs):
        super(MainWindow, self).__init__(*args, **kwargs)

        self.setupUi(self)

        self.setWindowTitle(APP_INFO.APP_NAME)
        self.setWindowIcon(QtGui.QIcon(&quot;:/icons/icon.ico&quot;))

        self.actionAbout.triggered.connect(self.actionAbout_triggered)
        self.actionAbout_Qt.triggered.connect(self.actionAbout_Qt_triggered)

    def actionAbout_triggered(self):
        QtWidgets.QMessageBox.about(
            self,
            APP_INFO.APP_NAME,
            &quot;&quot;&quot;
            &lt;h1&gt;{APP_NAME}&lt;/h1&gt;
            &lt;br&gt;
            Author:  {APP_AUTHOR}&lt;br&gt;
            Version: {Major}.{Minor}.{Revision}&lt;br&gt;
            &quot;&quot;&quot;.format(
                APP_NAME=APP_INFO.APP_NAME,
                APP_AUTHOR=APP_INFO.APP_AUTHOR,
                Major=APP_INFO.APP_VERSION.Major,
                Minor=APP_INFO.APP_VERSION.Minor,
                Revision=APP_INFO.APP_VERSION.Revision
            )
        )

    def actionAbout_Qt_triggered(self):
        QtWidgets.QMessageBox.aboutQt(self)

</code></pre>

<h2 id="icons-and-resources">Icons and Resources</h2>

<p>Icons and other resources are specified in <code>.qrc</code> files.</p>

<pre><code>&lt;!DOCTYPE RCC&gt;&lt;RCC version=&quot;1.0&quot;&gt;
&lt;qresource&gt;
    &lt;file&gt;icons/icon.ico&lt;/file&gt;
&lt;/qresource&gt;
&lt;/RCC&gt;
</code></pre>

<p>The <code>.qrc</code> file must then be compiled to a .py file which will be imported in the application.</p>

<p>The tool used to compile .qrc files to Python files is <code>pyrcc</code>. It&rsquo;s usable as a command line tool or can be imported and used as a Python library. We use this snippet in our <code>build.py</code> script to compile our resources into <code>resources.py</code>.</p>

<pre><code class="language-python">def build_resources():
    import os
    from PyQt5.pyrcc_main import main as pyrcc_main_func

    QRC_FILE = 'resources.qrc'
    PY_OUTPUT = os.path.join('src', 'resources.py')

    sys.argv = ['', '-o', PY_OUTPUT, QRC_FILE]
    pyrcc_main_func()
</code></pre>

<h2 id="application-entry-point">Application Entry Point</h2>

<p>Our application entry point is <code>src/application.py</code>.</p>

<pre><code class="language-python"># src/application.py

if __name__ == '__main__':
    import sys
    from PyQt5 import QtWidgets
    import resources
    from widgets.main_window import MainWindow

    app = QtWidgets.QApplication(sys.argv)
    main_win = MainWindow()
    main_win.show()

    sys.exit(app.exec_())
</code></pre>

<p>And if all goes well, we should see our awesome app on screen!</p>

<p><img src="/img/some-app.png" alt="SomeApp" /></p>

<h2 id="creating-an-executable-with-cx-freeze">Creating an Executable with cx_Freeze</h2>

<p>cx_Freeze is a tool that allows you to create executables from Python scripts. It&rsquo;s usable as a command line tool or can be imported and used as a Python library. We use this snippet in our <code>build.py</code> to invoke it.</p>

<pre><code class="language-python">def build_exe():
    import os
    import sys
    import cx_Freeze

    from app_info import APP_INFO

    # have to make sure args looks right
    sys.argv = sys.argv[:1] + ['build']

    app_path = os.path.join(os.path.dirname(__file__), &quot;src&quot;, &quot;application.py&quot;)

    if sys.platform == 'win32':
        executables = [cx_Freeze.Executable(
            app_path,
            targetName=APP_INFO.APP_NAME + &quot;.exe&quot;,
            icon=os.path.join('icons', 'icon.ico'),
            base=&quot;Win32GUI&quot;)]
    else:
        executables = [cx_Freeze.Executable(
            app_path,
            targetName=APP_INFO.APP_NAME,
            icon=os.path.join('icons', 'icon.png'))]

    include_files = [
        os.path.join(&quot;icons&quot;, 'icon.ico')
    ]

    options = {
        'build_exe': {
            &quot;include_files&quot;: include_files
        }
    }

    cx_Freeze.setup(
        name=APP_INFO.APP_NAME,
        version=_get_ver_string(),
        executables=executables,
        options=options
    )
</code></pre>

<h2 id="creating-a-windows-installer-with-inno-setup">Creating a Windows Installer with Inno Setup</h2>

<p>Inno Setup is a tool used for creating Windows installers. We need to use the <code>iscc</code> command line tool to invoke it. We provide several arguments to define variable values and finally specify our <code>.iss</code> setup script file.</p>

<pre><code class="language-python">def build_win_install():
    from app_info import APP_INFO
    import os
    os.system('iscc' +
              ' /DMyAppVersion=&quot;{}&quot;'.format(_get_ver_string()) +
              ' /DMyAppName=&quot;{}&quot;'.format(APP_INFO.APP_NAME) +
              ' /DMyAppPublisher=&quot;{}&quot;'.format(APP_INFO.APP_PUBLISHER) +
              ' /DMyAppURL=&quot;{}&quot;'.format(APP_INFO.APP_URL) +
              ' /DMyAppExeName=&quot;{}&quot;'.format(APP_INFO.APP_NAME + &quot;.exe&quot;) +
              ' inno_setup.iss'
    )
</code></pre>

<h2 id="references">References</h2>

<p><a href="https://wiki.qt.io/Qt_for_Python">https://wiki.qt.io/Qt_for_Python</a></p>

<p><a href="https://bitbucket.org/Odoth/pyside-template/">https://bitbucket.org/Odoth/pyside-template/</a></p>

<p><a href="https://bitbucket.org/Odoth/pyqt5-template/">https://bitbucket.org/Odoth/pyqt5-template/</a></p>

<p><a href="http://doc.qt.io/Qt-5/designer-using-custom-widgets.html">http://doc.qt.io/Qt-5/designer-using-custom-widgets.html</a></p>

            <ul class="share-buttons">
    <li>Share this article:</li>
    <li>
        <a class="icon-facebook-squared" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fclaytonrichey.com%2fpost%2fpyside-pyqt-app%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook"></a>
    </li>
    <li>
        <a class="icon-twitter" href="https://twitter.com/share?text=Cross%20Platform%20Desktop%20Apps%20with%20PySide%2fPyQt&amp;url=https%3a%2f%2fclaytonrichey.com%2fpost%2fpyside-pyqt-app%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Tweet this article"></a>
    </li>
    <li>
        <a class="icon-gplus" href="https://plus.google.com/share?url=https%3a%2f%2fclaytonrichey.com%2fpost%2fpyside-pyqt-app%2f" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google&#43;"></a>
    </li>
    <li>
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fclaytonrichey.com%2fpost%2fpyside-pyqt-app%2f&title=Cross%20Platform%20Desktop%20Apps%20with%20PySide%2fPyQt" onclick="window.open(this.href, 'linkedin-share', 'width=600,height=494');return false;" title="Share on Linkedin"></a>
    </li>
</ul>

        </article>
        
    </main>
    <aside class="author">
  <img class="profile-image" src="https://claytonrichey.com/img/profile.png" alt="Clayton Richey" />
  <p class="name">by 
  <strong>Clayton Richey</strong></p>
  <p class="address">USA</p>
  <p class="link"></p>
  <ul class="social">
    




<li><a href="//linkedin.com/in/clayton-richey-65216b22" class="icon-linkedin" target="_blank" title="Linkedin"></a></li>









<li><a href="//github.com/Odoth" class="icon-github" target="_blank" title="Github"></a></li>




<li><a href="https://claytonrichey.com/post/index.xml" class="icon-rss" target="_blank" title="RSS"></a></li>

  </ul>
  <br><br>
</aside>

</div>

<footer class="main-footer">
  <div class="container clearfix">
        <a class="icon-rss" href="https://claytonrichey.com/post/index.xml" title="RSS"></a>
        <p>&copy; 2019 &middot; Powered by <a href="http://gohugo.io">Hugo</a>.</p>
  </div>
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>window.jQuery || document.write('<script src="https:\/\/claytonrichey.com\/js\/vendor\/jquery-1.11.0.min.js"><\/script>')</script>
<script src="https://claytonrichey.com/js/plugins.js"></script>




<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-119954399-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</body>
</html>

